(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["CoreHome"]=t(require("vue")):e["CoreHome"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/CoreHome/vue/dist/",n(n.s="fae3")}({2342:function(e,t,n){"use strict";
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */window.hasBlockedContent=!1},"8bbf":function(t,n){t.exports=e},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"createAngularJsAdapter",(function(){return Oe})),n.d(t,"activityIndicatorAdapter",(function(){return tn})),n.d(t,"ActivityIndicator",(function(){return en})),n.d(t,"translate",(function(){return g})),n.d(t,"alertAdapter",(function(){return rn})),n.d(t,"AjaxHelper",(function(){return J})),n.d(t,"MatomoUrl",(function(){return F})),n.d(t,"Matomo",(function(){return h})),n.d(t,"Periods",(function(){return l})),n.d(t,"Day",(function(){return j})),n.d(t,"Week",(function(){return S})),n.d(t,"Month",(function(){return P})),n.d(t,"Year",(function(){return x})),n.d(t,"Range",(function(){return k})),n.d(t,"format",(function(){return f})),n.d(t,"getToday",(function(){return v})),n.d(t,"parseDate",(function(){return b})),n.d(t,"todayIsInRange",(function(){return w})),n.d(t,"Dropdown",(function(){return G})),n.d(t,"FocusAnywhereButHere",(function(){return Z})),n.d(t,"FocusIf",(function(){return te})),n.d(t,"MatomoDialog",(function(){return ke})),n.d(t,"ExpandOnClick",(function(){return ce})),n.d(t,"ExpandOnHover",(function(){return fe})),n.d(t,"EnrichedHeadline",(function(){return _e})),n.d(t,"ContentBlock",(function(){return Ke})),n.d(t,"Comparisons",(function(){return wt})),n.d(t,"Menudropdown",(function(){return It})),n.d(t,"DatePicker",(function(){return Lt})),n.d(t,"DateRangePicker",(function(){return Jt})),n.d(t,"PeriodDatePicker",(function(){return Yt})),n.d(t,"Notification",(function(){return fn})),n.d(t,"NotificationGroup",(function(){return On})),n.d(t,"NotificationsStore",(function(){return Dn})),"undefined"!==typeof window){var a=window.document.currentScript,o=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}n("2342");var r=n("8bbf");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class s{constructor(){i(this,"periods",{}),i(this,"periodOrder",[])}addCustomPeriod(e,t){if(this.periods[e])throw new Error(`The "${e}" period already exists! It cannot be overridden.`);this.periods[e]=t,this.periodOrder.push(e)}getAllLabels(){return Array().concat(this.periodOrder)}get(e){const t=this.periods[e];if(!t)throw new Error("Invalid period label: "+e);return t}parse(e,t){return this.get(e).parse(t)}isRecognizedPeriod(e){return!!this.periods[e]}}var l=new s;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */let c;const{piwik:d,broadcast:u,piwikHelper:p}=window;d.helper=p,d.broadcast=u,d.updateDateInTitle=function(e,t){if($(".top_controls #periodString").length&&(c=c||document.title,0===c.indexOf(d.siteName))){const n=` - ${l.parse(t,e).getPrettyString()} `;document.title=`${d.siteName}${n}${c.substr(d.siteName.length)}`}},d.hasUserCapability=function(e){return window.angular.isArray(d.userCapabilities)&&-1!==d.userCapabilities.indexOf(e)},d.on=function(e,t){function n(e){t(...e.detail)}t.wrapper=n,window.addEventListener(e,n)},d.off=function(e,t){t.wrapper&&window.removeEventListener(e,t.wrapper)},d.postEventNoEmit=function(e,...t){const n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},d.postEvent=function(e,...t){d.postEventNoEmit(e,...t);const n=d.helper.getAngularDependency("$rootScope");return n.$oldEmit(e,...t)};const m=d;var h=m;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function g(e,...t){let n=t;return 1===t.length&&t[0]&&t[0]instanceof Array&&([n]=t),window._pk_translate(e,n)}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function f(e){return $.datepicker.formatDate("yy-mm-dd",e)}function v(){const e=new Date(Date.now());return e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3),e.setHours(e.getHours()+(window.piwik.timezoneOffset||0)/3600),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function b(e){if(e instanceof Date)return e;const t=decodeURIComponent(e).trim();if(""===t)throw new Error("Invalid date, empty string.");if("today"===t||"now"===t)return v();if("yesterday"===t||"yesterdaySameTime"===t){const e=v();return e.setDate(e.getDate()-1),e}if(t.match(/last[ -]?week/i)){const e=v();return e.setDate(e.getDate()-7),e}if(t.match(/last[ -]?month/i)){const e=v();return e.setDate(1),e.setMonth(e.getMonth()-1),e}if(t.match(/last[ -]?year/i)){const e=v();return e.setFullYear(e.getFullYear()-1),e}return $.datepicker.parseDate("yy-mm-dd",t)}function w(e){return 2===e.length&&(v()>=e[0]&&v()<=e[1])}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class k{constructor(e,t,n){D(this,"startDate",void 0),D(this,"endDate",void 0),D(this,"childPeriodType",void 0),this.startDate=e,this.endDate=t,this.childPeriodType=n}static getLastNRange(e,t,n){const a=Math.max(parseInt(t.toString(),10)-1,0);if(Number.isNaN(a))throw new Error("Invalid range strAmount");let o=n?b(n):v(),r=new Date(o.getTime());if("day"===e)r.setDate(r.getDate()-a);else if("week"===e)r.setDate(r.getDate()-7*a);else if("month"===e)r.setDate(1),r.setMonth(r.getMonth()-a);else{if("year"!==e)throw new Error(`Unknown period type '${e}'.`);r.setFullYear(r.getFullYear()-a)}if("day"!==e){const t=l.periods[e].parse(r),n=l.periods[e].parse(o);[r]=t.getDateRange(),[,o]=n.getDateRange()}const i=new Date(1991,7,6);if(r.getTime()-i.getTime()<0)switch(e){case"year":r=new Date(1992,0,1);break;case"month":r=new Date(1991,8,1);break;case"week":r=new Date(1991,8,12);break;case"day":default:r=i;break}return new k(r,o,e)}static getLastNRangeChild(e,t,n){const a=t?b(t):v();let o=new Date(a.getTime()),r=new Date(a.getTime());if("day"===e)o.setDate(o.getDate()-n),r.setDate(r.getDate()-n);else if("week"===e)o.setDate(o.getDate()-7*n),r.setDate(r.getDate()-7*n);else if("month"===e)o.setDate(1),o.setMonth(o.getMonth()-n),r.setDate(1),r.setMonth(r.getMonth()-n);else{if("year"!==e)throw new Error(`Unknown period type '${e}'.`);o.setFullYear(o.getFullYear()-n),r.setFullYear(r.getFullYear()-n)}if("day"!==e){const t=l.periods[e].parse(o),n=l.periods[e].parse(r);[o]=t.getDateRange(),[,r]=n.getDateRange()}const i=new Date(1991,7,6);if(o.getTime()-i.getTime()<0)switch(e){case"year":o=new Date(1992,0,1);break;case"month":o=new Date(1991,8,1);break;case"week":o=new Date(1991,8,12);break;case"day":default:o=i;break}return new k(o,r,e)}static parse(e,t="day"){if(/^previous/.test(e)){const n=k.getLastNRange(t,"2").startDate;return k.getLastNRange(t,e.substring(8),n)}if(/^last/.test(e))return k.getLastNRange(t,e.substring(4));const n=decodeURIComponent(e).split(",");return new k(b(n[0]),b(n[1]),t)}static getDisplayText(){return g("General_DateRangeInPeriodList")}getPrettyString(){const e=f(this.startDate),t=f(this.endDate);return g("General_DateRangeFromTo",[e,t])}getDateRange(){return[this.startDate,this.endDate]}containsToday(){return w(this.getDateRange())}}function y(){return{getAllLabels:l.getAllLabels.bind(l),isRecognizedPeriod:l.isRecognizedPeriod.bind(l),get:l.get.bind(l),parse:l.parse.bind(l),parseDate:b,format:f,RangePeriod:k,todayIsInRange:w}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */l.addCustomPeriod("range",k),
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
window.piwik.addCustomPeriod=l.addCustomPeriod.bind(l),window.angular.module("piwikApp.service").factory("piwikPeriods",y);class j{constructor(e){C(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new j(b(e))}static getDisplayText(){return g("Intl_PeriodDay")}getPrettyString(){return f(this.dateInPeriod)}getDateRange(){return[new Date(this.dateInPeriod.getTime()),new Date(this.dateInPeriod.getTime())]}containsToday(){return w(this.getDateRange())}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */l.addCustomPeriod("day",j);class S{constructor(e){O(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new S(b(e))}static getDisplayText(){return g("Intl_PeriodWeek")}getPrettyString(){const e=this.getDateRange(),t=f(e[0]),n=f(e[1]);return g("General_DateRangeFromTo",[t,n])}getDateRange(){const e=(this.dateInPeriod.getDay()+6)%7,t=new Date(this.dateInPeriod.getTime());t.setDate(this.dateInPeriod.getDate()-e);const n=new Date(t.getTime());return n.setDate(t.getDate()+6),[t,n]}containsToday(){return w(this.getDateRange())}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */l.addCustomPeriod("week",S);class P{constructor(e){E(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new P(b(e))}static getDisplayText(){return g("Intl_PeriodMonth")}getPrettyString(){const e=g("Intl_Month_Long_StandAlone_"+(this.dateInPeriod.getMonth()+1));return`${e} ${this.dateInPeriod.getFullYear()}`}getDateRange(){const e=new Date(this.dateInPeriod.getTime());e.setDate(1);const t=new Date(this.dateInPeriod.getTime());return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),[e,t]}containsToday(){return w(this.getDateRange())}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */l.addCustomPeriod("month",P);class x{constructor(e){T(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new x(b(e))}static getDisplayText(){return g("Intl_PeriodYear")}getPrettyString(){return this.dateInPeriod.getFullYear().toString()}getDateRange(){const e=new Date(this.dateInPeriod.getTime());e.setMonth(0),e.setDate(1);const t=new Date(this.dateInPeriod.getTime());return t.setMonth(12),t.setDate(0),[e,t]}containsToday(){return w(this.getDateRange())}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */l.addCustomPeriod("year",x);const{piwik:I,broadcast:B}=window;function H(e,t){try{return l.parse(e,t),!0}catch(n){return!1}}class M{constructor(){N(this,"urlQuery",Object(r["ref"])("")),N(this,"hashQuery",Object(r["ref"])("")),N(this,"urlParsed",Object(r["computed"])(()=>Object(r["readonly"])(B.getValuesFromUrl("?"+this.urlQuery.value,!0)))),N(this,"hashParsed",Object(r["computed"])(()=>Object(r["readonly"])(B.getValuesFromUrl("?"+this.hashQuery.value,!0)))),N(this,"parsed",Object(r["computed"])(()=>Object(r["readonly"])({...this.urlParsed.value,...this.hashParsed.value}))),this.setUrlQuery(window.location.search),this.setHashQuery(window.location.hash),h.on("$locationChangeSuccess",e=>{const t=new URL(e);this.setUrlQuery(t.search.replace(/^\?/,"")),this.setHashQuery(t.hash.replace(/^#/,""))}),this.updatePeriodParamsFromUrl()}updateHash(e){const t="string"!==typeof e?this.stringify(e):e,n=h.helper.getAngularDependency("$location");n.search(t)}getSearchParam(e){const t=window.location.href.split("#"),n=new RegExp(e+"(\\[]|=)");if(t&&t[1]&&n.test(decodeURIComponent(t[1]))){const t=window.broadcast.getValueFromHash(e,window.location.href);if(t||"date"!==e&&"period"!==e&&"idSite"!==e)return t}return window.broadcast.getValueFromUrl(e,window.location.search)}stringify(e){return $.param(e).replace(/%5B%5D/g,"[]")}updatePeriodParamsFromUrl(){let e=this.getSearchParam("date");const t=this.getSearchParam("period");if(!H(t,e))return;if(I.period===t&&I.currentDateString===e)return;I.period=t;const n=l.parse(t,e).getDateRange();I.startDateString=f(n[0]),I.endDateString=f(n[1]),I.updateDateInTitle(e,t),"range"===I.period&&(e=`${I.startDateString},${I.endDateString}`),I.currentDateString=e}setUrlQuery(e){this.urlQuery.value=e.replace(/^\?/,"")}setHashQuery(e){this.hashQuery.value=e.replace(/^[#/?]+/,"")}}const V=new M;var F=V;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function L(){const e={getSearchParam:F.getSearchParam.bind(F)};return e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function A(){return h}function R(e,t){t.$oldEmit=t.$emit,t.$emit=function(e,...t){return h.postEvent(e,...t)},t.$oldBroadcast=t.$broadcast,t.$broadcast=function(e,...n){return h.postEventNoEmit(e,...n),t.$oldBroadcast(e,...n)},t.$on("$locationChangeSuccess",e.updatePeriodParamsFromUrl)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function U(e,t){if("abort"===t)return;if("undefined"===typeof Piwik_Popover)return void console.log("Request failed: "+e.responseText);const n=$("#loadingError");Piwik_Popover.isOpen()&&e&&500===e.status?e&&500===e.status&&$(document.body).html(piwikHelper.escape(e.responseText)):n.show()}I.updatePeriodParamsFromUrl=V.updatePeriodParamsFromUrl.bind(V),L.$inject=[],angular.module("piwikApp.service").service("piwikUrl",L),window.angular.module("piwikApp.service").service("piwik",A),R.$inject=["piwik","$rootScope"],window.angular.module("piwikApp.service").run(R),window.globalAjaxQueue=[],window.globalAjaxQueue.active=0,window.globalAjaxQueue.clean=function(){for(let e=this.length;e>=0;e-=1)this[e]&&4!==this[e].readyState||this.splice(e,1)},window.globalAjaxQueue.push=function(...e){return this.active+=e.length,this.clean(),Array.prototype.push.call(this,...e)},window.globalAjaxQueue.abort=function(){this.forEach(e=>e&&e.abort&&e.abort()),this.splice(0,this.length),this.active=0};class J{static fetch(e,t={}){const n=new J;return t.withTokenInUrl&&n.withTokenInUrl(),n.setFormat("json"),n.addParams({module:"API",format:"json",...e},"get"),t.postParams&&n.addParams(t.postParams,"post"),n.send()}constructor(){_(this,"format","json"),_(this,"timeout",null),_(this,"callback",null),_(this,"useRegularCallbackInCaseOfError",!1),_(this,"errorCallback",void 0),_(this,"withToken",!1),_(this,"completeCallback",void 0),_(this,"getParams",{}),_(this,"getUrl","?"),_(this,"postParams",{}),_(this,"loadingElement",null),_(this,"errorElement","#ajaxError"),_(this,"requestHandle",null),_(this,"defaultParams",["idSite","period","date","segment"]),this.errorCallback=U}addParams(e,t){const n="string"===typeof e?window.broadcast.getValuesFromUrl(e):e,a=["compareSegments","comparePeriods","compareDates"];Object.keys(n).forEach(e=>{const o=n[e];(-1===a.indexOf(e)||o)&&("get"===t.toLowerCase()?this.getParams[e]=o:"post"===t.toLowerCase()&&(this.postParams[e]=o))})}withTokenInUrl(){this.withToken=!0}setUrl(e){this.addParams(broadcast.getValuesFromUrl(e),"GET")}setBulkRequests(...e){const t=e.map(e=>"string"===typeof e?e:$.param(e));this.addParams({module:"API",method:"API.getBulkRequest",urls:t,format:"json"},"post")}setTimeout(e){this.timeout=e}setCallback(e){this.callback=e}useCallbackInCaseOfError(){this.useRegularCallbackInCaseOfError=!0}redirectOnSuccess(e){this.setCallback(()=>{piwikHelper.redirect(e)})}setErrorCallback(e){this.errorCallback=e}setCompleteCallback(e){this.completeCallback=e}setFormat(e){this.format=e}setLoadingElement(e){this.loadingElement=e||"#ajaxLoadingDiv"}setErrorElement(e){e&&(this.errorElement=e)}useGETDefaultParameter(e){if(e&&this.defaultParams)for(let t=0;t<this.defaultParams.length;t+=1)if(this.defaultParams[t]===e)return!0;return!1}removeDefaultParameter(e){if(e&&this.defaultParams)for(let t=0;t<this.defaultParams.length;t+=1)this.defaultParams[t]===e&&this.defaultParams.splice(t,1)}send(){return $(this.errorElement).length&&$(this.errorElement).hide(),this.loadingElement&&$(this.loadingElement).fadeIn(),this.requestHandle=this.buildAjaxCall(),window.globalAjaxQueue.push(this.requestHandle),new Promise((e,t)=>{this.requestHandle.then(e).fail(e=>{"abort"!==e.statusText&&(console.log(`Warning: the ${$.param(this.getParams)} request failed!`),t(e))})})}abort(){this.requestHandle&&"function"===typeof this.requestHandle.abort&&(this.requestHandle.abort(),this.requestHandle=null)}buildAjaxCall(){const e=this,t=this.mixinDefaultGetParams(this.getParams);let n=this.getUrl;"?"!==n[n.length-1]&&(n+="&"),t.segment&&(n=`${n}segment=${t.segment}&`,delete t.segment),t.date&&(n=`${n}date=${decodeURIComponent(t.date.toString())}&`,delete t.date),n+=$.param(t);const a={type:"POST",async:!0,url:n,dataType:this.format||"json",complete:this.completeCallback,error:function(...t){window.globalAjaxQueue.active-=1,e.errorCallback&&e.errorCallback.apply(this,t)},success:(e,t,n)=>{if(this.loadingElement&&$(this.loadingElement).hide(),e&&"error"===e.result&&!this.useRegularCallbackInCaseOfError){let t=null,n="toast";if($(this.errorElement).length&&e.message&&($(this.errorElement).show(),t=this.errorElement,n=null),e.message){const a=window["require"]("piwik/UI"),o=new a.Notification;o.show(e.message,{placeat:t,context:"error",type:n,id:"ajaxHelper"}),o.scrollToNotification()}}else this.callback&&this.callback(e,t,n);window.globalAjaxQueue.active-=1,h.ajaxRequestFinished&&h.ajaxRequestFinished()},data:this.mixinDefaultPostParams(this.postParams),timeout:null!==this.timeout?this.timeout:void 0};return $.ajax(a)}isRequestToApiMethod(){return this.getParams&&"API"===this.getParams.module&&this.getParams.method||this.postParams&&"API"===this.postParams.module&&this.postParams.method}isWidgetizedRequest(){return"Widgetize"===broadcast.getValueFromUrl("module")}getDefaultPostParams(){return this.withToken||this.isRequestToApiMethod()||h.shouldPropagateTokenAuth?{token_auth:h.token_auth,force_api_session:broadcast.isWidgetizeRequestWithoutSession()?0:1}:{}}mixinDefaultPostParams(e){const t=this.getDefaultPostParams(),n={...t,...e};return n}mixinDefaultGetParams(e){const t=F.getSearchParam("segment"),n={idSite:h.idSite?h.idSite.toString():broadcast.getValueFromUrl("idSite"),period:h.period||broadcast.getValueFromUrl("period"),segment:t},a=e;return a.token_auth&&(a.token_auth=null,delete a.token_auth),Object.keys(n).forEach(e=>{this.useGETDefaultParameter(e)&&!a[e]&&!this.postParams[e]&&n[e]&&(a[e]=n[e])}),!this.useGETDefaultParameter("date")||a.date||this.postParams.date||(a.date=h.currentDateString),a}}function q(){return globalAjaxQueue}window.ajaxHelper=J,angular.module("piwikApp.service").service("globalAjaxQueue",q);
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var G={mounted(e,t){let n={};$(e).addClass("matomo-dropdown-menu");const a=!!$(e).parent().closest(".dropdown-content").length;a&&(n={hover:!0},$(e).addClass("submenu"),$(t.value.activates).addClass("submenu-dropdown-content"),$(e).parents(".dropdown-content").addClass("submenu-container")),$(e).dropdown(n)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function z(e){return{restrict:"A",link:function(t,n,a){const o={instance:null,value:{activates:$("#"+a.activates)[0]},oldValue:null,modifiers:{},dir:{}};e(()=>{G.mounted(n[0],o)})}}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function Q(e,t,n){const a=t.value.isMouseDown&&t.value.hasScrolled;t.value.isMouseDown=!1,t.value.hasScrolled=!1,a||e.contains(n.target)||t.value&&t.value.blur()}function Y(e,t){t.value.hasScrolled=!0}function W(e,t){t.value.isMouseDown=!0,t.value.hasScrolled=!1}function K(e,t,n){27===n.which&&setTimeout(()=>{t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.blur&&t.value.blur()},0)}z.$inject=["$timeout"],angular.module("piwikApp").directive("piwikDropdownMenu",z);const X=document.documentElement;var Z={mounted(e,t){t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.onEscapeHandler=K.bind(null,e,t),t.value.onMouseDown=W.bind(null,e,t),t.value.onClickOutsideElement=Q.bind(null,e,t),t.value.onScroll=Y.bind(null,e,t),X.addEventListener("keyup",t.value.onEscapeHandler),X.addEventListener("mousedown",t.value.onMouseDown),X.addEventListener("mouseup",t.value.onClickOutsideElement),X.addEventListener("scroll",t.value.onScroll)},unmounted(e,t){X.removeEventListener("keyup",t.value.onEscapeHandler),X.removeEventListener("mousedown",t.value.onMouseDown),X.removeEventListener("mouseup",t.value.onClickOutsideElement),X.removeEventListener("scroll",t.value.onScroll)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function ee(){return{restrict:"A",link:function(e,t,n){const a={instance:null,value:{blur:()=>{setTimeout(()=>{e.$apply(n.piwikFocusAnywhereButHere)},0)}},oldValue:null,modifiers:{},dir:{}},o=Z;o.mounted(t[0],a),t.on("$destroy",()=>o.unmounted(t[0],a))}}}ee.$inject=[],angular.module("piwikApp.directive").directive("piwikFocusAnywhereButHere",ee);
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var te={updated(e,t){t.value.focusIf&&setTimeout(()=>{e.focus()},5)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function ne(){return{restrict:"A",link:function(e,t,n){e.$watch(n.piwikFocusIf,n=>{const a={instance:null,value:{focusIf:!!n,afterFocus:()=>e.$apply()},oldValue:null,modifiers:{},dir:{}};te.updated(t[0],a)})}}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function ae(e){e.classList.toggle("expanded");const t=e.querySelector(".dropdown.positionInViewport");t&&h.helper.setMarginLeftToBeInViewport(t)}function oe(e,t,n){const a=t.value.isMouseDown&&t.value.hasScrolled;t.value.isMouseDown=!1,t.value.hasScrolled=!1,a||e.contains(n.target)||e.classList.remove("expanded")}function re(e){e.value.hasScrolled=!0}function ie(e){e.value.isMouseDown=!0,e.value.hasScrolled=!1}function se(e,t,n){27===n.which&&(t.value.isMouseDown=!1,t.value.hasScrolled=!1,e.classList.remove("expanded"))}angular.module("piwikApp.directive").directive("piwikFocusIf",ne);const le=document.documentElement;var ce={mounted(e,t){t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.onExpand=ae.bind(null,e),t.value.onEscapeHandler=se.bind(null,e,t),t.value.onMouseDown=ie.bind(null,t),t.value.onClickOutsideElement=oe.bind(null,e,t),t.value.onScroll=re.bind(null,t),t.value.expander.addEventListener("click",t.value.onExpand),le.addEventListener("keyup",t.value.onEscapeHandler),le.addEventListener("mousedown",t.value.onMouseDown),le.addEventListener("mouseup",t.value.onClickOutsideElement),le.addEventListener("scroll",t.value.onScroll)},unmounted(e,t){t.value.expander.removeEventListener("click",t.value.onExpand),le.removeEventListener("keyup",t.value.onEscapeHandler),le.removeEventListener("mousedown",t.value.onMouseDown),le.removeEventListener("mouseup",t.value.onClickOutsideElement),le.removeEventListener("scroll",t.value.onScroll)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function de(){return{restrict:"A",link:function(e,t){const n={instance:null,value:{expander:t.find(".title").first()[0]},oldValue:null,modifiers:{},dir:{}},a=ce;a.mounted(t[0],n),t.on("$destroy",()=>a.unmounted(t[0],n))}}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function ue(e){e.classList.add("expanded");const t=e.querySelector(".dropdown.positionInViewport");t&&h.helper.setMarginLeftToBeInViewport(t)}function pe(e){e.classList.remove("expanded")}function me(e,t){e.contains(t.target)||e.classList.remove("expanded")}function he(e,t){27===t.which&&e.classList.remove("expanded")}de.$inject=[],angular.module("piwikApp").directive("piwikExpandOnClick",de);const ge=document.documentElement;var fe={mounted(e,t){t.value.onMouseEnter=ue.bind(null,e),t.value.onMouseLeave=pe.bind(null,e),t.value.onClickOutsideElement=me.bind(null,e),t.value.onEscapeHandler=he.bind(null,e),t.value.expander.addEventListener("mouseenter",t.value.onMouseEnter),e.addEventListener("mouseleave",t.value.onMouseLeave),ge.addEventListener("keyup",t.value.onEscapeHandler),ge.addEventListener("mouseup",t.value.onClickOutsideElement)},unmounted(e,t){t.value.expander.removeEventListener("mouseenter",t.value.onMouseEnter),e.removeEventListener("mouseleave",t.value.onMouseLeave),document.removeEventListener("keyup",t.value.onEscapeHandler),document.removeEventListener("mouseup",t.value.onClickOutsideElement)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function ve(){return{restrict:"A",link:function(e,t){const n={instance:null,value:{expander:t.find(".title").first()[0]},oldValue:null,modifiers:{},dir:{}},a=fe;a.mounted(t[0],n),t.on("$destroy",()=>a.unmounted(t[0],n))}}}ve.$inject=[],angular.module("piwikApp").directive("piwikExpandOnHover",ve);const be={ref:"root"};function we(e,t,n,a,o,i){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",be,[Object(r["renderSlot"])(e.$slots,"default")],512)),[[r["vShow"],e.modelValue]])}var De=Object(r["defineComponent"])({props:{modelValue:{type:Boolean,required:!0},element:{type:HTMLElement,required:!1}},emits:["yes","no","closeEnd","close","update:modelValue"],activated(){this.$emit("update:modelValue",!1)},watch:{modelValue(e,t){if(e){const e=this.element||this.$refs.root.firstElementChild;h.helper.modalConfirm(e,{yes:()=>{this.$emit("yes")},no:()=>{this.$emit("no")}},{onCloseEnd:()=>{this.element||this.$refs.root.appendChild(e),this.$emit("update:modelValue",!1),this.$emit("closeEnd")}})}else!1===e&&!0===t&&this.$emit("close")}}});De.render=we;var ke=De;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */let ye=0;function Ce(e){return e.substring(0,1).toLowerCase()+e.substring(1).replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function je(e){return e.substring(0,1).toLowerCase()+e.substring(1).replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Oe(e){const{component:t,scope:n={},events:a={},$inject:o,directiveName:i,transclude:s,mountPointFactory:l,postCreate:c,noScope:d,restrict:u="A"}=e,p=ye;s&&(ye+=1);const m={};function h(...e){const o={restrict:u,scope:d?void 0:m,compile:function(){return{post:function(o,i,d){const u=s?i.find(`[ng-transclude][counter=${p}]`):null;let m="<root-component";Object.entries(a).forEach(e=>{const[t]=e;m+=` @${t}="onEventHandler('${t}', $event)"`}),Object.entries(n).forEach(([e,t])=>{if("&"===t.angularJsBind){const t=Ce(e);a[t]||(m+=` @${t}="onEventHandler('${t}', $event)"`)}else m+=` :${t.vue}="${t.vue}"`}),m+=">",s&&(m+='<div ref="transcludeTarget"/>'),m+="</root-component>";const h=Object(r["createApp"])({template:m,data(){const t={};return Object.entries(n).forEach(([n,a])=>{let r=o[n];"undefined"===typeof r&&"undefined"!==typeof a.default&&(r=a.default instanceof Function?a.default(o,i,d,...e):a.default),t[a.vue]=r}),t},setup(){if(s){const e=Object(r["ref"])(null);return{transcludeTarget:e}}},methods:{onEventHandler(t,n){const r=je(t);o[r]&&o[r](n),a[t]&&a[t](n,o,i,d,...e)}}});h.config.globalProperties.$sanitize=window.vueSanitize,h.config.globalProperties.translate=g,h.component("root-component",t);const f=l?l(o,i,d,...e):i[0],v=h.mount(f);Object.entries(n).forEach(([t,n])=>{n.angularJsBind&&"&"!==n.angularJsBind&&o.$watch(t,a=>{"undefined"!==typeof n.default&&"undefined"===typeof a?v[t]=n.default instanceof Function?n.default(o,i,d,...e):n.default:v[t]=a})}),s&&$(v.transcludeTarget).append(u),c&&c(v,o,i,d,...e),i.on("$destroy",()=>{h.unmount()})}}}};return s&&(o.transclude=!0,o.template=`<div ng-transclude counter="${p}"/>`),o}return Object.entries(n).forEach(([e,t])=>{t.vue||(t.vue=e),t.angularJsBind&&(m[e]=t.angularJsBind)}),h.$inject=o||[],angular.module("piwikApp").directive(i,h),h}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:ke,scope:{show:{vue:"modelValue",default:!1},element:{default:(e,t)=>t[0]}},events:{yes:(e,t,n,a)=>{a.yes&&(t.$eval(a.yes),setTimeout(()=>{t.$apply()},0))},no:(e,t,n,a)=>{a.no&&(t.$eval(a.no),setTimeout(()=>{t.$apply()},0))},close:(e,t,n,a)=>{a.close&&(t.$eval(a.close),setTimeout(()=>{t.$apply()},0))},"update:modelValue":(e,t,n,a,o)=>{setTimeout(()=>{t.$apply(o(a.piwikDialog).assign(t,e))},0)}},$inject:["$parse"],directiveName:"piwikDialog",transclude:!0,mountPointFactory:(e,t)=>{const n=$('<div class="vue-placeholder"/>');return n.appendTo(t),n[0]},postCreate:(e,t,n,a)=>{t.$watch(a.piwikDialog,(t,n)=>{n!==t&&(e.modelValue=t||!1)})},noScope:!0});const Se={key:0,class:"title",tabindex:"6"},Ee=["href","title"],Pe={class:"iconsBar"},Te=["href","title"],$e=Object(r["createElementVNode"])("span",{class:"icon-help"},null,-1),xe=[$e],Ne=["title"],Ie=Object(r["createElementVNode"])("span",{class:"icon-info"},null,-1),Be=[Ie],He={class:"ratingIcons"},Me={class:"inlineHelp"},Ve=["innerHTML"],Fe=["href"];function Le(e,t,n,a,o,i){const s=Object(r["resolveComponent"])("RateFeature");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"enrichedHeadline",onMouseenter:t[1]||(t[1]=t=>e.showIcons=!0),onMouseleave:t[2]||(t[2]=t=>e.showIcons=!1),ref:"root"},[e.editUrl?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Se,[Object(r["renderSlot"])(e.$slots,"default")])),e.editUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,class:"title",href:e.editUrl,title:e.translate("CoreHome_ClickToEditX",e.$sanitize(e.actualFeatureName))},[Object(r["renderSlot"])(e.$slots,"default")],8,Ee)):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",Pe,[e.helpUrl&&!e.actualInlineHelp?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",target:"_blank",class:"helpIcon",href:e.helpUrl,title:e.translate("CoreHome_ExternalHelp")},xe,8,Te)):Object(r["createCommentVNode"])("",!0),e.actualInlineHelp?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,onClick:t[0]||(t[0]=t=>e.showInlineHelp=!e.showInlineHelp),class:Object(r["normalizeClass"])(["helpIcon",{active:e.showInlineHelp}]),title:e.translate(e.reportGenerated?"General_HelpReport":"General_Help")},Be,10,Ne)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",He,[Object(r["createVNode"])(s,{title:e.actualFeatureName},null,8,["title"])])],512),[[r["vShow"],e.showIcons||e.showInlineHelp]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",Me,[Object(r["createElementVNode"])("div",{innerHTML:e.$sanitize(e.actualInlineHelp)},null,8,Ve),e.helpUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",target:"_blank",class:"readMore",href:e.helpUrl},Object(r["toDisplayString"])(e.translate("General_MoreDetails")),9,Fe)):Object(r["createCommentVNode"])("",!0)],512),[[r["vShow"],e.showInlineHelp]])],544)}const Ae=Object(r["defineAsyncComponent"])(()=>new Promise(e=>{window.$(document).ready(()=>{e(window.Feedback.RateFeature)})}));var Re=Object(r["defineComponent"])({props:{helpUrl:{type:String,default:""},editUrl:{type:String,default:""},reportGenerated:String,featureName:String,inlineHelp:String},components:{RateFeature:Ae},data(){return{showIcons:!1,showInlineHelp:!1,actualFeatureName:this.featureName,actualInlineHelp:this.inlineHelp}},watch:{inlineHelp(e){this.actualInlineHelp=e},featureName(e){this.actualFeatureName=e}},mounted(){const{root:e}=this.$refs;setTimeout(()=>{if(!this.actualInlineHelp){let t=e.querySelector(".title .inlineHelp");if(!t&&e.parentElement.nextElementSibling&&(t=e.parentElement.nextElementSibling.querySelector(".reportDocumentation")),t){const e=t.getAttribute("data-content").trim();e.length&&(this.actualInlineHelp=`<p>${e}</p>`,setTimeout(()=>t.remove(),0))}}this.actualFeatureName||(this.actualFeatureName=e.querySelector(".title").textContent),this.reportGenerated&&l.parse(h.period,h.currentDateString).containsToday()&&window.$(e.querySelector(".report-generated")).tooltip({track:!0,content:this.reportGenerated,items:"div",show:!1,hide:!1})})}});Re.render=Le;var _e=Re;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:_e,scope:{helpUrl:{angularJsBind:"@"},editUrl:{angularJsBind:"@"},reportGenerated:{angularJsBind:"@?"},featureName:{angularJsBind:"@"},inlineHelp:{angularJsBind:"@?"}},directiveName:"piwikEnrichedHeadline",transclude:!0});const Ue={class:"card",ref:"root"},Je={class:"card-content"},qe={key:0,class:"card-title"},Ge={key:1,class:"card-title"},ze={ref:"content"};function Qe(e,t,n,a,o,i){const s=Object(r["resolveComponent"])("EnrichedHeadline");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ue,[Object(r["createElementVNode"])("div",Je,[!e.contentTitle||e.actualFeature||e.helpUrl||e.actualHelpText?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",qe,Object(r["toDisplayString"])(e.contentTitle),1)),e.contentTitle&&(e.actualFeature||e.helpUrl||e.actualHelpText)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",Ge,[Object(r["createVNode"])(s,{"feature-name":e.actualFeature,"help-url":e.helpUrl,"inline-help":e.actualHelpText},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.contentTitle),1)]),_:1},8,["feature-name","help-url","inline-help"])])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",ze,[Object(r["renderSlot"])(e.$slots,"default")],512)])],512)}let Ye=null;var We=Object(r["defineComponent"])({props:{contentTitle:String,feature:String,helpUrl:String,helpText:String,anchor:String},components:{EnrichedHeadline:_e},data(){return{actualFeature:this.feature,actualHelpText:this.helpText}},watch:{feature(e){this.actualFeature=e},helpText(e){this.actualHelpText=e}},mounted(){const{root:e,content:t}=this.$refs;if(this.anchor){const t=document.createElement("a");t.id=this.anchor,e.parentElement.prepend(t)}let n;if(setTimeout(()=>{const e=t.querySelector(".contentHelp");e&&(this.actualHelpText=e.innerHTML,e.remove())},0),!this.actualFeature||!0!==this.actualFeature&&"true"!==this.actualFeature||(this.actualFeature=this.contentTitle),null===Ye&&(Ye=document.querySelector("#content.admin")),Ye&&(n=Ye.offsetTop),n||0===n){const t=e.closest("[piwik-widget-loader]"),a=t?t.offsetTop:e.offsetTop;a-n<17&&(e.style.marginTop=0)}}});We.render=Qe;var Ke=We;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:Ke,scope:{contentTitle:{angularJsBind:"@"},feature:{angularJsBind:"@"},helpUrl:{angularJsBind:"@"},helpText:{angularJsBind:"@"},anchor:{angularJsBind:"@?"}},directiveName:"piwikContentBlock",transclude:!0});function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class Ze{get state(){return Object(r["readonly"])(this.segmentState)}constructor(){Xe(this,"segmentState",Object(r["reactive"])({availableSegments:[]})),h.on("piwikSegmentationInited",()=>this.setSegmentState())}setSegmentState(){try{const e=$(".segmentEditorPanel").data("uiControlObject");this.segmentState.availableSegments=e.impl.availableSegments||[]}catch(e){}}}var et=new Ze;function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const nt=8,at=3;function ot(e){return e?e instanceof Array?e:[e]:[]}class rt{constructor(){tt(this,"privateState",Object(r["reactive"])({comparisonsDisabledFor:[]})),tt(this,"state",Object(r["readonly"])(this.privateState)),tt(this,"colors",{}),tt(this,"segmentComparisons",Object(r["computed"])(()=>this.parseSegmentComparisons())),tt(this,"periodComparisons",Object(r["computed"])(()=>this.parsePeriodComparisons())),tt(this,"isEnabled",Object(r["computed"])(()=>this.checkEnabledForCurrentPage())),this.loadComparisonsDisabledFor(),$(()=>{this.colors=this.getAllSeriesColors()}),Object(r["watch"])(()=>this.getComparisons(),()=>h.postEvent("piwikComparisonsChanged"),{deep:!0})}getComparisons(){return this.getSegmentComparisons().concat(this.getPeriodComparisons())}isComparing(){return this.isComparisonEnabled()&&(this.segmentComparisons.value.length>1||this.periodComparisons.value.length>1)}isComparingPeriods(){return this.getPeriodComparisons().length>1}getSegmentComparisons(){return this.isComparisonEnabled()?this.segmentComparisons.value:[]}getPeriodComparisons(){return this.isComparisonEnabled()?this.periodComparisons.value:[]}getSeriesColor(e,t,n=0){const a=this.getComparisonSeriesIndex(t.index,e.index)%nt;if(0===n)return this.colors["series"+a];const o=n%at;return this.colors[`series${a}-shade${o}`]}getSeriesColorName(e,t){let n="series"+e%nt;return t>0&&(n+="-shade"+t%at),n}isComparisonEnabled(){return this.isEnabled.value}getIndividualComparisonRowIndices(e){const t=this.getSegmentComparisons().length,n=e%t,a=Math.floor(e/t);return{segmentIndex:n,periodIndex:a}}getComparisonSeriesIndex(e,t){const n=this.getSegmentComparisons().length;return e*n+t}getAllComparisonSeries(){const e=[];let t=0;return this.getPeriodComparisons().forEach(n=>{this.getSegmentComparisons().forEach(a=>{e.push({index:t,params:{...a.params,...n.params},color:this.colors["series"+t]}),t+=1})}),e}removeSegmentComparison(e){if(!this.isComparisonEnabled())throw new Error("Comparison disabled.");const t=[...this.segmentComparisons.value];t.splice(e,1);const n={};0===e&&(n.segment=t[0].params.segment),this.updateQueryParamsFromComparisons(t,this.periodComparisons.value,n)}addSegmentComparison(e){if(!this.isComparisonEnabled())throw new Error("Comparison disabled.");const t=this.segmentComparisons.value.concat([{params:e,index:-1,title:""}]);this.updateQueryParamsFromComparisons(t,this.periodComparisons.value)}updateQueryParamsFromComparisons(e,t,n={}){const a={},o={};let r=!1,i=!1;e.forEach(e=>{r?a[e.params.segment]=!0:r=!0}),t.forEach(e=>{i?o[`${e.params.period}|${e.params.date}`]=!0:i=!0});const s=[],l=[];Object.keys(o).forEach(e=>{const t=e.split("|");s.push(t[0]),l.push(t[1])});const c={compareSegments:Object.keys(a),comparePeriods:s,compareDates:l};if(h.helper.isAngularRenderingThePage()){const e=F.hashParsed.value,t={...e,...c,...n};return delete t["compareSegments[]"],delete t["comparePeriods[]"],delete t["compareDates[]"],void(JSON.stringify(t)!==JSON.stringify(e)&&F.updateHash(t))}const d=[];["compareSegments","comparePeriods","compareDates"].forEach(e=>{c[e].length||d.push(e)});const u=F.stringify(n),p=F.stringify(c);window.broadcast.propagateNewPage(u,void 0,p,d)}getAllSeriesColors(){const{ColorManager:e}=h;if(!e)return[];const t=[];for(let n=0;n<nt;n+=1){t.push("series"+n);for(let e=0;e<at;e+=1)t.push(`series${n}-shade${e}`)}return e.getColors("comparison-series-color",t)}loadComparisonsDisabledFor(){const e=F.parsed.value.module;"CoreUpdater"!==e&&"Installation"!==e?J.fetch({module:"API",method:"API.getPagesComparisonsDisabledFor"}).then(e=>{this.privateState.comparisonsDisabledFor=e}):this.privateState.comparisonsDisabledFor=[]}parseSegmentComparisons(){const{availableSegments:e}=et.state,t=[...ot(F.parsed.value.compareSegments)];t.unshift(F.parsed.value.segment||"");const n=[];return t.forEach((t,a)=>{let o;e.forEach(e=>{e.definition!==t&&e.definition!==decodeURIComponent(t)&&decodeURIComponent(e.definition)!==t||(o=e)});let r=o?o.name:g("General_Unknown");""===t.trim()&&(r=g("SegmentEditor_DefaultAllVisits")),n.push({params:{segment:t},title:h.helper.htmlDecode(r),index:a})}),n}parsePeriodComparisons(){const e=[...ot(F.parsed.value.comparePeriods)],t=[...ot(F.parsed.value.compareDates)];e.unshift(F.parsed.value.period),t.unshift(F.parsed.value.date);const n=[];for(let o=0;o<Math.min(t.length,e.length);o+=1){let r;try{r=l.parse(e[o],t[o]).getPrettyString()}catch(a){r=g("General_Error")}n.push({params:{date:t[o],period:e[o]},title:r,index:o})}return n}checkEnabledForCurrentPage(){const e=F.parsed.value.category||F.parsed.value.module,t=F.parsed.value.subcategory||F.parsed.value.action,n=`${e}.${t}`,a=-1===this.privateState.comparisonsDisabledFor.indexOf(n)&&-1===this.privateState.comparisonsDisabledFor.indexOf(e+".*");return document.documentElement.classList.toggle("comparisonsDisabled",!a),a}}var it=new rt;const st={key:0,ref:"root",class:"matomo-comparisons"},lt={class:"comparison-type"},ct=["title"],dt=["href"],ut=["title"],pt={class:"comparison-period-label"},mt=["onClick"],ht=["title"],gt={class:"loadingPiwik",style:{display:"none"}},ft=["alt"];function vt(e,t,n,a,o,i){return e.isComparing?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",st,[Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("General_Comparisons")),1),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.segmentComparisons,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"comparison card",key:t.index},[Object(r["createElementVNode"])("div",lt,Object(r["toDisplayString"])(e.translate("General_Segment")),1),Object(r["createElementVNode"])("div",{class:"title",title:t.title+"<br/>"+decodeURIComponent(t.params.segment)},[Object(r["createElementVNode"])("a",{target:"_blank",href:e.getUrlToSegment(t.params.segment)},Object(r["toDisplayString"])(t.title),9,dt)],8,ct),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.periodComparisons,n=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"comparison-period",key:n.index,title:e.getComparisonTooltip(t,n)},[Object(r["createElementVNode"])("span",{class:"comparison-dot",style:Object(r["normalizeStyle"])({"background-color":e.getSeriesColor(t,n)})},null,4),Object(r["createElementVNode"])("span",pt,Object(r["toDisplayString"])(n.title)+" ("+Object(r["toDisplayString"])(e.getComparisonPeriodType(n))+") ",1)],8,ut))),128)),e.segmentComparisons.length>1?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,class:"remove-button",onClick:t=>e.removeSegmentComparison(n)},[Object(r["createElementVNode"])("span",{class:"icon icon-close",title:e.translate("General_ClickToRemoveComp")},null,8,ht)],8,mt)):Object(r["createCommentVNode"])("",!0)]))),128)),Object(r["createElementVNode"])("div",gt,[Object(r["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:e.translate("General_LoadingData")},null,8,ft),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("General_LoadingData")),1)])],512)):Object(r["createCommentVNode"])("",!0)}var bt=Object(r["defineComponent"])({props:{},data(){return{comparisonTooltips:null}},setup(){const e=Object(r["computed"])(()=>it.isComparing()),t=Object(r["computed"])(()=>it.getSegmentComparisons()),n=Object(r["computed"])(()=>it.getPeriodComparisons()),a=it.getSeriesColor.bind(it);return{isComparing:e,segmentComparisons:t,periodComparisons:n,getSeriesColor:a}},methods:{comparisonHasSegment(e){return"undefined"!==typeof e.params.segment},removeSegmentComparison(e){window.$(this.$refs.root).tooltip("destroy"),it.removeSegmentComparison(e)},getComparisonPeriodType(e){const{period:t}=e.params;if("range"===t)return g("CoreHome_PeriodRange");const n=g(`Intl_Period${t.substring(0,1).toUpperCase()}${t.substring(1)}`);return n.substring(0,1).toUpperCase()+n.substring(1)},getComparisonTooltip(e,t){if(this.comparisonTooltips&&Object.keys(this.comparisonTooltips).length)return(this.comparisonTooltips[t.index]||{})[e.index]},getUrlToSegment(e){const t={...F.hashParsed.value};return delete t.comparePeriods,delete t.compareDates,delete t.compareSegments,t.segment=e,`${window.location.search}#?${F.stringify(t)}`},setUpTooltips(){const{$:e}=window;e(this.$refs.root).tooltip({track:!0,content:function(){const t=e(this).attr("title");return window.vueSanitize(t.replace(/\n/g,"<br />"))},show:{delay:200,duration:200},hide:!1})},onComparisonsChanged(){if(this.comparisonTooltips=null,!it.isComparing())return;const e=it.getPeriodComparisons(),t=it.getSegmentComparisons();J.fetch({method:"API.getProcessedReport",apiModule:"VisitsSummary",apiAction:"get",compare:"1",compareSegments:F.getSearchParam("compareSegments"),comparePeriods:F.getSearchParam("comparePeriods"),compareDates:F.getSearchParam("compareDates"),format_metrics:"1"}).then(n=>{this.comparisonTooltips={},e.forEach(e=>{this.comparisonTooltips[e.index]={},t.forEach(t=>{const a=this.generateComparisonTooltip(n,e,t);this.comparisonTooltips[e.index][t.index]=a})})})},generateComparisonTooltip(e,t,n){if(!e.reportData.comparisons)return"";const a=it.getComparisonSeriesIndex(t.index,0),o=e.reportData.comparisons[a],r=it.getComparisonSeriesIndex(t.index,n.index),i=e.reportData.comparisons[r],s=e.reportData.comparisons[n.index];let l='<div class="comparison-card-tooltip">',c=(i.nb_visits/o.nb_visits*100).toFixed(2);return c+="%",l+=g("General_ComparisonCardTooltip1",[`'${i.compareSegmentPretty}'`,i.comparePeriodPretty,c,i.nb_visits.toString(),o.nb_visits.toString()]),t.index>0&&(l+="<br/><br/>",l+=g("General_ComparisonCardTooltip2",[i.nb_visits_change.toString(),s.compareSegmentPretty,s.comparePeriodPretty])),l+="</div>",l}},updated(){setTimeout(()=>this.setUpTooltips())},mounted(){h.on("piwikComparisonsChanged",()=>{this.onComparisonsChanged()}),this.onComparisonsChanged(),setTimeout(()=>this.setUpTooltips())},beforeUnmount(){try{window.$(this.refs.root).tooltip("destroy")}catch(e){}}});bt.render=vt;var wt=bt;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Dt(){return it}Dt.$inject=[],angular.module("piwikApp.service").factory("piwikComparisonsService",Dt);Oe({component:wt,directiveName:"piwikComparisons",restrict:"E"});const kt={ref:"root",class:"menuDropdown"},yt=["title"],Ct=["innerHTML"],jt=Object(r["createElementVNode"])("span",{class:"icon-arrow-bottom"},null,-1),Ot={class:"items"},St={key:0,class:"search"},Et=["placeholder"],Pt=["title"],Tt=["title"];function $t(e,t,n,a,o,i){const s=Object(r["resolveDirective"])("focus-if"),l=Object(r["resolveDirective"])("focus-anywhere-but-here");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",kt,[Object(r["createElementVNode"])("span",{class:"title",onClick:t[0]||(t[0]=t=>e.showItems=!e.showItems),title:e.tooltip},[Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(this.actualMenuTitle)},null,8,Ct),jt],8,yt),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",Ot,[e.showSearch&&e.showItems?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",St,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchTerm=t),onChange:t[2]||(t[2]=t=>e.searchItems(e.searchTerm)),placeholder:e.translate("General_Search")},null,40,Et),[[r["vModelText"],e.searchTerm],[s,e.showItems]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("img",{class:"search_ico",src:"plugins/Morpheus/images/search_ico.png",title:e.translate("General_Search")},null,8,Pt),[[r["vShow"],!e.searchTerm]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("img",{onClick:t[3]||(t[3]=t=>{e.searchTerm="",e.searchItems("")}),class:"reset",src:"plugins/CoreHome/images/reset_search.png",title:e.translate("General_Clear")},null,8,Tt),[[r["vShow"],e.searchTerm]])])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{onClick:t[4]||(t[4]=t=>e.selectItem(t))},[Object(r["renderSlot"])(e.$slots,"default")])],512),[[r["vShow"],e.showItems]])],512)),[[l,{blur:e.lostFocus}]])}const{$:xt}=window;var Nt=Object(r["defineComponent"])({props:{menuTitle:String,tooltip:String,showSearch:Boolean,menuTitleChangeOnClick:String},directives:{FocusAnywhereButHere:Z,FocusIf:te},emits:["afterSelect"],watch:{menuTitle(){this.actualMenuTitle=this.menuTitle}},data(){return{showItems:!1,searchTerm:"",actualMenuTitle:this.menuTitle}},methods:{lostFocus(){this.showItems=!1},selectItem(e){const t=e.target.classList;t.contains("item")||t.contains("disabled")||t.contains("separator")||(!1!==this.menuTitleChangeOnClick&&(this.actualMenuTitle=e.target.textContent.replace(/[\u0000-\u2666]/g,e=>`&#${e.charCodeAt(0)};`)),this.showItems=!1,xt(this.$slots.default()).find(".item").removeClass("active"),t.add("active"),this.$emit("afterSelect"))},searchItems(e){const t=e.toLowerCase();xt(this.$refs.root).find(".item").each((e,n)=>{const a=xt(n);-1===a.text().toLowerCase().indexOf(t)?a.hide():a.show()})}}});Nt.render=$t;var It=Nt;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:It,scope:{menuTitle:{angularJsBind:"@"},tooltip:{angularJsBind:"@"},showSearch:{angularJsBind:"="},menuTitleChangeOnClick:{angularJsBind:"="}},directiveName:"piwikMenudropdown",transclude:!0,events:{"after-select":e=>{setTimeout(()=>{e.$apply()},0)}}});const Bt={ref:"root"};function Ht(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Bt,null,512)}const Mt=1,{$:Vt}=window;var Ft=Object(r["defineComponent"])({props:{selectedDateStart:Date,selectedDateEnd:Date,highlightedDateStart:Date,highlightedDateEnd:Date,viewDate:[String,Date],stepMonths:Number,disableMonthDropdown:Boolean,options:Object},emits:["cellHover","cellHoverLeave","dateSelect"],setup(e,t){const n=Object(r["ref"])(null);function a(t,n){const a=t.children("a");if(e.selectedDateStart&&e.selectedDateEnd&&n>=e.selectedDateStart&&n<=e.selectedDateEnd?t.addClass("ui-datepicker-current-period"):t.removeClass("ui-datepicker-current-period"),e.highlightedDateStart&&e.highlightedDateEnd&&n>=e.highlightedDateStart&&n<=e.highlightedDateEnd){const e=a.length?a:t;e.addClass("ui-state-hover")}else t.removeClass("ui-state-hover"),a.removeClass("ui-state-hover")}function o(e,t,n){if(e.hasClass("ui-datepicker-other-month"))return i(e,t,n);const a=parseInt(e.children("a,span").text(),10);return new Date(n,t,a)}function i(e,t,n){let a;const r=e.parent(),i=r.children("td");if(r.is(":first-child")){const s=r.children("td:not(.ui-datepicker-other-month)").first();return a=o(s,t,n),a.setDate(i.index(e)-i.index(s)+1),a}const s=r.children("td:not(.ui-datepicker-other-month)").last();return a=o(s,t,n),a.setDate(a.getDate()+i.index(e)-i.index(s)),a}function s(){const e=Vt(n.value),t=e.find("td[data-month]"),a=parseInt(t.attr("data-month"),10),o=parseInt(t.attr("data-year"),10);return[a,o]}function l(){const e=Vt(n.value),t=e.find(".ui-datepicker-calendar"),r=s(),i=t.find("td"),l=i.first(),c=o(l,r[0],r[1]);i.each((function(){a(Vt(this),c),c.setDate(c.getDate()+1)}))}function c(){let t=e.viewDate;if(!t)return!1;if(!(t instanceof Date))try{t=Vt.datepicker.parseDate("yy-mm-dd",t)}catch(r){return!1}const a=Vt(n.value),o=s();return(o[0]!==t.getMonth()||o[1]!==t.getFullYear())&&(a.datepicker("setDate",t),!0)}function d(){const e=Vt(n.value);e.find("td[data-event]").off("click"),e.find(".ui-state-active").removeClass("ui-state-active"),e.find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day"),e.find(".ui-datepicker-prev,.ui-datepicker-next").attr("href","")}function u(){const t=Vt(n.value),a=e.stepMonths||Mt;if(t.datepicker("option","stepMonths")===a)return!1;const o=Vt(".ui-datepicker-month",t).val(),r=Vt(".ui-datepicker-year",t).val();return t.datepicker("option","stepMonths",a).datepicker("setDate",new Date(r,o)),d(),!0}function p(){const t=Vt(n.value);t.find(".ui-datepicker-month").attr("disabled",e.disableMonthDropdown)}function m(){if(!Vt(this).hasClass("ui-state-hover"))return;const e=Vt(this).parent(),t=e.parent();e.is(":first-child")?t.find("a").first().click():t.find("a").last().click()}function g(){p(),l()}return Object(r["watch"])(()=>({...e}),(e,t)=>{let n=!1;["selectedDateStart","selectedDateEnd","highlightedDateStart","highlightedDateEnd"].forEach(a=>{n||(!e[a]&&t[a]&&(n=!0),e[a]&&!t[a]&&(n=!0),e[a]&&t[a]&&e[a].getTime()!==t[a].getTime()&&(n=!0))}),e.viewDate!==t.viewDate&&c()&&(n=!0),e.stepMonths!==t.stepMonths&&u(),e.enableDisableMonthDropdown!==t.enableDisableMonthDropdown&&p(),n&&l()}),Object(r["onMounted"])(()=>{const a=Vt(n.value),r=e.options||{},i={...h.getBaseDatePickerOptions(),...r,onChangeMonthYear:()=>{setTimeout(()=>{d()})}};a.datepicker(i),a.on("mouseover","tbody td a",e=>{e.originalEvent&&l()}),a.on("mouseenter","tbody td",(function(){const e=s(),n=Vt(this),a=o(n,e[0],e[1]);t.emit("cellHover",{date:a,$cell:n})})),a.on("mouseout","tbody td a",()=>{l()}),a.on("mouseleave","table",()=>t.emit("cellHoverLeave")).on("mouseenter","thead",()=>t.emit("cellHoverLeave")),a.on("click","tbody td.ui-datepicker-other-month",()=>m()),a.on("click",e=>{e.preventDefault();const t=Vt(e.target).closest("a");(t.is(".ui-datepicker-next")||t.is(".ui-datepicker-prev"))&&g()}),a.on("click","td[data-month]",e=>{const n=Vt(e.target).closest("td"),a=parseInt(n.attr("data-month"),10),o=parseInt(n.attr("data-year"),10),r=parseInt(n.children("a,span").text(),10);t.emit("dateSelect",{date:new Date(o,a,r)})});const f=u();c(),p(),f||d(),l()}),{root:n}}});Ft.render=Ht;var Lt=Ft;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:Lt,scope:{selectedDateStart:{angularJsBind:"<"},selectedDateEnd:{angularJsBind:"<"},highlightedDateStart:{angularJsBind:"<"},highlightedDateEnd:{angularJsBind:"<"},viewDate:{angularJsBind:"<"},stepMonths:{angularJsBind:"<"},disableMonthDropdown:{angularJsBind:"<"},options:{angularJsBind:"<"},cellHover:{angularJsBind:"&"},cellHoverLeave:{angularJsBind:"&"},dateSelect:{angularJsBind:"&"}},directiveName:"piwikDatePicker",events:{"cell-hover":(e,t,n,a,o)=>{o()},"cell-hover-leave":(e,t,n,a,o)=>{o()},"date-select":(e,t,n,a,o)=>{o()}},$inject:["$timeout"]});const At={id:"calendarRangeFrom"},Rt={id:"calendarRangeTo"};function _t(e,t,n,a,o,i){const s=Object(r["resolveComponent"])("DatePicker");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",At,[Object(r["createElementVNode"])("h6",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("General_DateRangeFrom"))+" ",1),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",id:"inputCalendarFrom",name:"inputCalendarFrom",class:"browser-default","onUpdate:modelValue":t[0]||(t[0]=t=>e.startDateText=t),onChange:t[1]||(t[1]=t=>e.onRangeInputChanged("from",t)),onKeyup:t[2]||(t[2]=t=>e.handleEnterPress(t))},null,544),[[r["vModelText"],e.startDateText]])]),Object(r["createVNode"])(s,{id:"calendarFrom","view-date":e.startDate,"selected-date-start":e.fromPickerSelectedDates[0],"selected-date-end":e.fromPickerSelectedDates[1],"highlighted-date-start":e.fromPickerHighlightedDates[0],"highlighted-date-end":e.fromPickerHighlightedDates[1],onDateSelect:t[3]||(t[3]=t=>e.setStartRangeDate(t.date)),onCellHover:t[4]||(t[4]=t=>e.fromPickerHighlightedDates=e.getNewHighlightedDates(t.date,t.$cell)),onCellHoverLeave:t[5]||(t[5]=t=>e.fromPickerHighlightedDates=[null,null])},null,8,["view-date","selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end"])]),Object(r["createElementVNode"])("div",Rt,[Object(r["createElementVNode"])("h6",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("General_DateRangeTo"))+" ",1),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",id:"inputCalendarTo",name:"inputCalendarTo",class:"browser-default","onUpdate:modelValue":t[6]||(t[6]=t=>e.endDateText=t),onChange:t[7]||(t[7]=t=>e.onRangeInputChanged("to",t)),onKeyup:t[8]||(t[8]=t=>e.handleEnterPress(t))},null,544),[[r["vModelText"],e.endDateText]])]),Object(r["createVNode"])(s,{id:"calendarTo","view-date":e.endDate,"selected-date-start":e.toPickerSelectedDates[0],"selected-date-end":e.toPickerSelectedDates[1],"highlighted-date-start":e.toPickerHighlightedDates[0],"highlighted-date-end":e.toPickerHighlightedDates[1],onDateSelect:t[9]||(t[9]=t=>e.setEndRangeDate(t.date)),onCellHover:t[10]||(t[10]=t=>e.toPickerHighlightedDates=e.getNewHighlightedDates(t.date,t.$cell)),onCellHoverLeave:t[11]||(t[11]=t=>e.toPickerHighlightedDates=[null,null])},null,8,["view-date","selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end"])])],64)}var Ut=Object(r["defineComponent"])({props:{startDate:String,endDate:String},components:{DatePicker:Lt},data(){let e=null;try{e=b(this.startDate)}catch(n){}let t=null;try{t=b(this.endDate)}catch(n){}return{fromPickerSelectedDates:[e,e],toPickerSelectedDates:[t,t],fromPickerHighlightedDates:[null,null],toPickerHighlightedDates:[null,null],startDateText:this.startDate,endDateText:this.endDate}},emits:["rangeChange","submit"],watch:{startDate(){this.startDateText=this.startDate,this.setStartRangeDateFromStr(this.startDate)},endDate(){this.endDateText=this.endDate,this.setEndRangeDateFromStr(this.endDate)}},mounted(){this.rangeChanged()},methods:{setStartRangeDate(e){this.fromPickerSelectedDates=[e,e],this.rangeChanged()},setEndRangeDate(e){this.toPickerSelectedDates=[e,e],this.rangeChanged()},onRangeInputChanged(e,t){"from"===e?this.setStartRangeDateFromStr(t.target.value):this.setEndRangeDateFromStr(t.target.value)},getNewHighlightedDates(e,t){return t.hasClass("ui-datepicker-unselectable")?null:[e,e]},handleEnterPress(e){13===e.keyCode&&this.$emit("submit",{start:this.startDate,end:this.endDate})},setStartRangeDateFromStr(e){let t;try{t=b(e)}catch(n){this.startDateText=this.startDate}t&&(this.fromPickerSelectedDates=[t,t]),this.rangeChanged()},setEndRangeDateFromStr(e){let t;try{t=b(e)}catch(n){this.endDateText=this.endDate}t&&(this.toPickerSelectedDates=[t,t]),this.rangeChanged()},rangeChanged(){this.$emit("rangeChange",{start:f(this.fromPickerSelectedDates[0]),end:f(this.toPickerSelectedDates[0])})}}});Ut.render=_t;var Jt=Ut;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:Jt,scope:{startDate:{angularJsBind:"<"},endDate:{angularJsBind:"<"},rangeChange:{angularJsBind:"&"},submit:{angularJsBind:"&"}},directiveName:"piwikDateRangePicker",restrict:"E"});function qt(e,t,n,a,o,i){const s=Object(r["resolveComponent"])("DatePicker");return Object(r["openBlock"])(),Object(r["createBlock"])(s,{"selected-date-start":e.selectedDates[0],"selected-date-end":e.selectedDates[1],"highlighted-date-start":e.highlightedDates[0],"highlighted-date-end":e.highlightedDates[1],"view-date":e.viewDate,"step-months":"year"===e.period?12:1,"disable-month-dropdown":"year"===e.period,onCellHover:t[0]||(t[0]=t=>e.onHoverNormalCell(t.date,t.$cell)),onCellHoverLeave:t[1]||(t[1]=t=>e.onHoverLeaveNormalCells()),onDateSelect:t[2]||(t[2]=t=>e.onDateSelected(t.date))},null,8,["selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end","view-date","step-months","disable-month-dropdown"])}const Gt=new Date(h.minDateYear,h.minDateMonth-1,h.minDateDay),zt=new Date(h.maxDateYear,h.maxDateMonth-1,h.maxDateDay);var Qt=Object(r["defineComponent"])({props:{period:String,date:[String,Date]},components:{DatePicker:Lt},emits:["select"],setup(e,t){const n=Object(r["ref"])(e.date),a=Object(r["ref"])([null,null]),o=Object(r["ref"])([null,null]);function i(t){const n=l.get(e.period).parse(t).getDateRange();return n[0]=Gt<n[0]?n[0]:Gt,n[1]=zt>n[1]?n[1]:zt,n}function s(t,n){const a=t<Gt||t>zt,r=n.hasClass("ui-datepicker-other-month")&&("month"===e.period||"day"===e.period);o.value=a||r?[null,null]:i(t)}function c(){o.value=[null,null]}function d(e){t.emit("select",{date:e})}function u(){e.period&&e.date?a.value=i(e.date):a.value=[null,null]}return Object(r["watch"])(e,u),u(),{selectedDates:a,highlightedDates:o,viewDate:n,onHoverNormalCell:s,onHoverLeaveNormalCells:c,onDateSelected:d}}});Qt.render=qt;var Yt=Qt;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:Yt,scope:{period:{angularJsBind:"<"},date:{angularJsBind:"<"},select:{angularJsBind:"&"}},directiveName:"piwikPeriodDatePicker",restrict:"E"});const Wt={class:"loadingPiwik"},Kt=Object(r["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:""},null,-1);function Xt(e,t,n,a,o,i){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Wt,[Kt,Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.loadingMessage),1)],512)),[[r["vShow"],e.loading]])}var Zt=Object(r["defineComponent"])({props:{loading:{type:Boolean,required:!0,default:!1},loadingMessage:{type:String,required:!1,default:g("General_LoadingData")}}});Zt.render=Xt;var en=Zt,tn=Oe({component:en,scope:{loading:{vue:"loading",angularJsBind:"<"},loadingMessage:{vue:"loadingMessage",angularJsBind:"<",default:()=>g("General_LoadingData")}},$inject:[],directiveName:"piwikActivityIndicator"});
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function nn(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])(["alert",{["alert-"+e.severity]:!0}])},[Object(r["renderSlot"])(e.$slots,"default")],2)}var an=Object(r["defineComponent"])({props:{severity:{type:String,required:!0}}});an.render=nn;var on=an,rn=Oe({component:on,scope:{severity:{vue:"severity",angularJsBind:"@piwikAlert"}},directiveName:"piwikAlert",transclude:!0});
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const sn={key:0},ln=["data-notification-instance-id"],cn={key:1},dn={class:"notification-body"},un=["innerHTML"],pn={key:1};function mn(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Transition"],{name:"toast"===e.type?"slow-fade-out":void 0,onAfterLeave:t[1]||(t[1]=t=>e.toastClosed())},{default:Object(r["withCtx"])(()=>[e.deleted?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",sn,[Object(r["createVNode"])(r["Transition"],{name:"toast"===e.type?"toast-slide-up":void 0,appear:""},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(r["Transition"],{name:e.animate?"fade-in":void 0,appear:""},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["notification system",{[e.context?"notification-"+e.context:""]:!!e.context}]),style:Object(r["normalizeStyle"])(e.style),ref:"root","data-notification-instance-id":e.notificationInstanceId},[e.noclear?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,type:"button",class:"close","data-dismiss":"alert",onClick:t[0]||(t[0]=t=>e.closeNotification(t))}," × ")),e.title?(Object(r["openBlock"])(),Object(r["createElementBlock"])("strong",cn,Object(r["toDisplayString"])(e.title),1)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",dn,[e.message?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,innerHTML:e.$sanitize(e.message)},null,8,un)):Object(r["createCommentVNode"])("",!0),e.message?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",pn,[Object(r["renderSlot"])(e.$slots,"default")]))])],14,ln)]),_:3},8,["name"])])]),_:3},8,["name"])]))]),_:3},8,["name"])}const{$:hn}=window;var gn=Object(r["defineComponent"])({props:{notificationId:String,notificationInstanceId:String,title:String,context:String,type:String,noclear:Boolean,toastLength:{type:Number,default:12e3},style:[String,Object],animate:Boolean,message:String},computed:{canClose(){return"persistent"!==this.type&&!this.noclear}},emits:["closed"],data(){return{deleted:!1}},mounted(){const e=()=>{setTimeout(()=>{this.deleted=!0},this.toastLength)};"toast"===this.type&&e(),this.style&&hn(this.$refs.root).css(this.style)},methods:{toastClosed(){Object(r["nextTick"])(()=>{this.$emit("closed")})},closeNotification(e){this.canClose&&e&&e.target&&(this.deleted=!0,Object(r["nextTick"])(()=>{this.$emit("closed")})),this.markNotificationAsRead()},markNotificationAsRead(){this.notificationId&&J.fetch({module:"CoreHome",action:"markNotificationAsRead"},{postParams:{notificationId:this.notificationId}})}}});gn.render=mn;var fn=gn;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */Oe({component:fn,scope:{notificationId:{angularJsBind:"@?"},title:{angularJsBind:"@?notificationTitle"},context:{angularJsBind:"@?"},type:{angularJsBind:"@?"},noclear:{angularJsBind:"@?"},toastLength:{angularJsBind:"@?"}},directiveName:"piwikNotification",transclude:!0});function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class bn{constructor(){vn(this,"privateState",Object(r["reactive"])({notifications:[]})),vn(this,"nextNotificationId",0)}get state(){return this.privateState}appendNotification(e){this.checkMessage(e.message),e.id&&this.remove(e.id),this.privateState.notifications.push(e)}prependNotification(e){this.checkMessage(e.message),e.id&&this.remove(e.id),this.privateState.notifications.unshift(e)}remove(e){this.privateState.notifications=this.privateState.notifications.filter(t=>t.id!==e)}parseNotificationDivs(){const e=$('[data-role="notification"]');e.each((t,n)=>{const a=$(n),o=a.data(),r=a.html();r&&this.show({...o,message:r,animate:!1}),e.remove()})}clearTransientNotifications(){this.privateState.notifications=this.privateState.notifications.filter(e=>"transient"!==e.type)}show(e){this.checkMessage(e.message),this.checkNotToast(e);let t=this.appendNotification,n="#notificationContainer";if(e.placeat)n=e.placeat;else{const e=".modal.open .modal-content";document.querySelector(e)&&(n=e,t=this.prependNotification)}const a=e.group||(e.placeat?e.placeat.toString():"");this.initializeNotificationContainer(n,a);const o=(this.nextNotificationId+=1).toString();return t.call(this,{...e,group:a,notificationId:e.id,notificationInstanceId:o}),o}scrollToNotification(e){const t=document.querySelector(`[data-notification-instance-id=${e}]`);t&&h.lazyScrollTo(t,250)}toast(e){this.checkMessage(e.message);const t=$(e.placeat);if(!t.length)throw new Error("A valid selector is required for the placeat option when using Notification.toast().");const n=document.createElement("div");n.style.position="absolute",n.style.top=t.offset().top+"px",n.style.left=t.offset().left+"px",n.style.zIndex="1000",document.body.appendChild(n);const a=Object(r["createApp"])({render:()=>Object(r["createVNode"])(fn,{...e,notificationId:e.id,type:"toast",onClosed:()=>{Object(r["render"])(null,n)}})});a.config.globalProperties.$sanitize=window.vueSanitize,a.config.globalProperties.translate=g,a.mount(n)}initializeNotificationContainer(e,t){const n=window.$(e);if(n.children(".notification-group").length)return;const a=document.createElement("div");n.append(a);const o=window.CoreHome.NotificationGroup,i=Object(r["createApp"])({template:'<NotificationGroup :group="group"/>',data:()=>({group:t})});i.config.globalProperties.$sanitize=window.vueSanitize,i.config.globalProperties.translate=g,i.component("NotificationGroup",o),i.mount(a[0])}checkMessage(e){if(!e)throw new Error("No message given, cannot display notification")}checkNotToast(e){if("toast"===e.type)throw new Error("Use NotificationsStore.toast() to create toasts.")}}const wn=new bn;var Dn=wn;$(()=>wn.parseNotificationDivs()),
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
angular.module("piwikApp").factory("notifications",()=>Dn);const kn={class:"notification-group"},yn=["innerHTML"];function Cn(e,t,n,a,o,i){const s=Object(r["resolveComponent"])("Notification");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",kn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.notifications,(t,n)=>(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:t.id||"no-id-"+n,"notification-id":t.id,title:t.title,context:t.context,type:t.type,noclear:t.noclear,"toast-length":t.toastLength,style:Object(r["normalizeStyle"])(t.style),animate:t.animate,position:t.position,onClosed:n=>e.removeNotification(t.id)},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",{innerHTML:e.$sanitize(t.message)},null,8,yn)]),_:2},1032,["notification-id","title","context","type","noclear","toast-length","style","animate","position","onClosed"]))),128))])}var jn=Object(r["defineComponent"])({props:{group:String},components:{Notification:fn},computed:{notifications(){return Dn.state.notifications.filter(e=>this.group?this.group===e.group:!e.group)}},data(){return{notificationStore:Dn}},methods:{removeNotification(e){this.notificationStore.remove(e)}}});jn.render=Cn;var On=jn;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=CoreHome.umd.min.js.map